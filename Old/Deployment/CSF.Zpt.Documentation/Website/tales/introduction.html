<!doctype html>
<html tal:define="activePage string:introduction_to_tales">
<head metal:use-macro="documents/Shared/general-page.html/macros/common_document_head">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="utf-8">
<title metal:fill-slot="document_title">Writing expressions with TALES</title>
<base href="../" />
<style type="text/css">
@import url(css/styles.css);
@import url(css/dummy.css);
</style>
<script data-main="js/config/main" type="text/javascript" src="js/lib/require.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/default.min.css">
</head>
<body metal:use-macro="documents/Shared/general-page.html/macros/common_document_body" class="page_introduction_to_tales">
<div class="content_wrapper">
  <header class="page_header dummy">
    Dummy content
  </header>
  <div class="main_page_area">
    <nav>
      <h2>Navigation menu</h2>
      <ul class="active_introduction dummy">
        <li class="introduction"><a href=".">Introduction</a></li>
        <li class="other_page"><a href="dummy.html">Dummy page</a></li>
      </ul>
    </nav>
    <section class="main_page_content" metal:fill-slot="main_page_content">
      <header><h1>Writing expressions with TALES</h1></header>
      <nav id="page_navigation" metal:use-macro="documents/Shared/on-this-page.html/macros/page_navigation">
        <ol metal:fill-slot="contents">
          <li>
            <a href="tales/introduction.html#expression_types">TALES expression types</a>
          </li>
          <li>
            <a href="tales/introduction.html#standard_types">The standard expression types</a>
						<ol>
              <li>
							  <a href="tales/introduction.html#path_expressions">Easily access model values</a>
							</li>
              <li>
                <a href="tales/introduction.html#not_expressions">Negate boolean values</a>
              </li>
              <li>
                <a href="tales/introduction.html#string_expressions">Write and format strings</a>
              </li>
              <li>
                <a href="tales/introduction.html#csharp_expressions">Evaluate C♯ expressions</a>
              </li>
						</ol>
          </li>
          <li>
            <a href="tales/introduction.html#other_types">Other expression types</a>
          </li>
        </ol>
      </nav>
      <p>
        Both
				<a href="metal/introduction.html" title="Macro Extenion Template Attribute Language">METAL</a> &amp;
				<a href="tal/introduction.html" title="Template Attribute Language">TAL</a>
				attributes make use of expressions to access values from the object model which was provided to the rendering process.
				These expressions are written in the Template Attribute Language Expression Syntax: TALES.
			</p>
			<h2 id="expression_types">TALES expression types</h2>
			<p>
        TALES is in fact a collection of expression types, each with its own syntax.
				In ZPT-Sharp, each expression type is provided by <a href="plugins.html">a plugin</a>.
				The installed plugins determine which expression types are available.
			</p>
			<pre><code class="html">&lt;div tal:define=&quot;message string:Welcome!&quot;&gt;
  Hello
&lt;/div&gt;</code></pre>
			<p>
        In the example above, the <strong>string</strong> expression type is selected by using the prefix
				<code>string:</code>.
			</p>
      <p>
        One of the installed expression type plugins must be nominated in
				<a href="configuration.html">the application configuration file</a> as the default expression type.
				Any expressions which are not qualified with a prefix are evaluated using the default expression plugin;
				typically that is the <strong>path</strong> expression plugin.
			</p>
			<h2 id="standard_types">The standard expression types</h2>
			<p>
        The following lists a few examples of the 'standard' expression plugins which are installed by the
				<a href="nuget-packages.html">ZPT-Sharp NuGet bundles</a>.
				At the end of this page, a few other plugins are listed which are not shipped as standard.
			</p>
			<h3 id="path_expressions">Easily access model values</h3>
      <p>
        TALES <strong>path</strong> expressions provide a simplified read-only perspective of a .NET object model.
			</p>
			<pre><code class="nohighlight">path:here/CurrentUser/GetShoppingCart/Contents/Count</code></pre>
			<p>
        Path expressions traverse items within an object hierarchy using the forward-slash character.
				This syntax is familiar to developers and designers alike, as it looks similar to a URL.
				Expressions may traverse properties, methods (as long as they have no parameters), indexers and
				readable fields, all using the same notation.
			</p>
			<pre><code class="nohighlight">path:user/Nickname | user/FullName | user/Username</code></pre>
			<p>
        Path expressions may also include <em>multiple paths</em>, separated by the pipe symbol.
				In this case, the first path which is successfully evaluated is returned as the result of the expression.
			</p>
			<p>
        Path expressions are very powerful; there is more to read about their capabilities on
				<a href="tales/path-expressions.html">their detailed documentation page</a>.
			</p>
			<h3 id="not_expressions">Negate boolean values</h3>
			<p>
        The <strong>not</strong> expression plugin always prefixes another expression.
			</p>
      <pre><code class="nohighlight">not:path:quotes/Hamlet/ToBe</code></pre>
			<p>
        The expression following the <code>not:</code> prefix is evaluated in isolation and its result is
				coerced to either true or false.
				Finally, the opposite of that boolean value is returned as the expression result.
			</p>
			<p>
        The rules for coercing values to true/false are found in
				<a href="tales/not-expressions.html">the not expression's documentation page</a>.
			</p>
			<h3 id="string_expressions">Write and format strings</h3>
			<p>
        The <strong>string</strong> plugin may be used to provide text values.
				Its usefulnes comes to light when used with placeholders to inject the results of path expressions into the string.
			</p>
			<pre><code class="nohighlight">string:Hello $name; how are you feeling today?</code></pre>
			<p>
        As can be seen from the example, placeholders are denoted with the dollar symbol.
				More complex paths must be prefixed with a dollar symbol and encapsulated in braces.
			</p>
      <pre><code class="nohighlight">string:You have ${user/BooksOnLoan/GetHumanReadableCount | noBooks} on loan</code></pre>
      <p>
        The full
				<a href="tales/string-expressions.html">documentation page for string expressions</a>
				goes into further depth about how they are written.
			</p>
			<h3 id="csharp_expressions">Evaluate C♯ expressions</h3>
			<p>
        It is also possible to evaluate native C♯ expressions, using the <strong>csharp</strong> expression plugin.
			</p>
			<pre><code class="nohighlight">csharp:String.Concat(user.Forename.Substring(0, 1), &amp;quot; &amp;quot;, user.Surname)</code></pre>
			<p>
        The example above creates an abbreviated full-name using the first character of the user's
				forename and their full surname.
			</p>
			<p>
				<em>Notice that the double-quotation marks in the expression had to be encoded as <code>&amp;quot;</code>?</em>
				Because TALES expressions are written inside HTML/XML attribute values, naked double-quotes are not permitted,
				meaning that the encoding is mandatory.
				The same is true of greater-than, less-than and ampersand symbols.
			</p>
			<p>
        There is a lot more to learn about the capabilities and also the limitations of C♯ expressions within
				ZPT-Sharp.  This information is available on
				<a href="tales/csharp-expressions.html">C♯ expressions documentation page</a>.
			</p>
			<h2 id="other_types">Other expression types</h2>
			<p>
        The following expression types not distributed in the standard ZPT-Sharp bundles.
			  They are available via freely installable plugins if desired.
			</p>
			<ul>
        <li>
          <a href="tales/python-expressions.html">Python expressions</a> allow you to evaluate native Python
					expressions, via <a href="http://ironpython.net/">Iron Python</a>.
				</li>
				<li>
          <a href="tales/load-expressions.html">Load expressions</a> instruct ZPT-Sharp to load another
					document/view and render it using the current model.
					Particularly useful when combined with
					<a href="tal/content-replace.html">TAL content/replace</a> attributes which use the <strong>structure</strong>
					modifier.
				</li>
			</ul>
    </section>
  </div>
</div>
<footer class="page_footer dummy">
  Dummy content
</footer>
</body>
</html>
