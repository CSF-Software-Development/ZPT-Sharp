<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"[]>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>ZPT-Sharp Quick-start for ASP.NET MVC</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<base href="http://craigfowler.github.com/ZPT-Sharp/" />
<style type="text/css">
@import url(static/css/reset.css);
@import url(static/css/global-screen.css);
@import url(static/css/page-specific.css);
@import url(http://fonts.googleapis.com/css?family=Ubuntu:400,400italic,700,700italic);

</style>


</head>
<body>
<div class="page">
  <div class="region_header">
    <a href="index.html" class="site_title" title="Home page">ZPT-Sharp</a>
    <p class="site_tagline">A Zope Page Templates implementation for .NET</p>
  </div>
  <div class="region_main">
    <div class="main_navigation">
      
      
        <h5>Main navigation</h5>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="example.html">Example &amp; explanation</a></li>
          <li><a href="quickstart-mvc.html">ASP.NET MVC Quick-start</a></li>
          <!--
          
          These sections are commented out of the main nav whilst they are being written.
          
          <li><a href="quickstart-pagebuilder.html">PageBuilder Quick-start</a></li>
          <li><a href="quickstart-syntax.html">ZPT Syntax Quick-start</a></li>
          <li><a href="quickstart-api.html">API introduction</a></li>
          -->
        </ul>
        <h5 class="other_resources">Other resources</h5>
        <ul>
          <li><a href="api-doxygen/" title="Auto-generated API documentation, using DoxyGen">API documentation</a></li>
        </ul>
      
    </div>
    <div class="region_content index">
      <h1>ZPT-Sharp Quick-start for ASP.NET MVC</h1>
      <p>
        The standard way of using ZPT-Sharp is as a custom <code>ViewEngine</code> for ASP.NET MVC.  ZPT-Sharp is
        compatible and tested with ASP.NET MVC version 2 and is likely to be compatible with higher versions as well.
        There are a few simple configurations that you should perform in order to start using ZPT to create your views:
      </p>
      <h2 id="steps">Steps to start using ZPT-Sharp right now</h2>
      <p>
        The steps below assume that you have a working ASP.NET MVC configuration set up already.
      </p>
      <ol>
        <li>
          Register <code>CraigFowler.Web.ZPT.Mvc.ZptViewEngine</code> in your global.asax.cs and tell ZPT-Sharp to
          search assemblies for types that you are using as <strong>view classes</strong> (see optional step 4).  There
          is an <a href="quickstart-mvc.html#global-asax-sample">sample snippet of global.asax.cs</a> at the end of this
          guide to help you get this done.
        </li>
        <li>
          Write your controllers as normal with no modifications needed.  One note of worth is that anything you add to
          the <code>ViewData</code> collection within a controller will be made available to the template document as
          a <strong><acronym title="Template Attribute Language Expression Syntax">TALES</acronym> definition</strong>.
        </li>
        <li>
          Write your views using the <a href="quickstart-syntax.html" title="ZPT syntax quick-start">ZPT syntax</a>.
          The standard filename extension to save ZPT documents with is <code>.pt</code>.
        </li>
        <li>
          Your templates can optionally make use of
          <a href="view-classes.html" title="Guide to using ZPT view classes">view classes</a>, providing them with
          further functionality.  A view class could be thought of as similar to an ASP.NET code-behind class but in an
          MVC environment it is more limited in its scope; view classes should be limited to reading information from
          your model and providing additional TALES definitions for the template to use.
          View classes all implement the interface <code>CraigFowler.Web.ZPT.IZptDocument</code>.
        </li>
      </ol>
      <p>
        And with the above steps complete you are ready to go.  When you select a view using a controller, the ZPT-Sharp
        engine will load and render the relevant template document using any dynamic data you have given it.
      </p>
      <h2 id="global-asax-sample">Sample global.asax.cs snippet</h2>
      <p>
        This is a (heavily-annotated) snippet of the relevant code that you will need in your global.asax.cs.  Note that
        currently you must run the <code>ZptMetadata.RegisterDocumentClasses</code> method on any assemblies that
        contain types that you wish to use as
        <a href="view-classes.html" title="Guide to using ZPT view classes">view classes</a> (see optional step 4
        above).  You can instead pass <code>System.Type</code> to that method if you choose, registering each type
        individually.
      </p>
      <code class="block">// You will need:
// using CraigFowler.Web.ZPT;
// using CraigFowler.Web.ZPT.Mvc;

protected void Application_Start ()
{
  // You probably want to register some routes here
  
  /* Tell the ZPT engine about classes that implement
   * CraigFowler.Web.ZPT.IZptDocument
   * After https://github.com/craigfowler/ZPT-Sharp/issues/5
   * is resolved, this step will no longer be needed.
   */
  ZptMetadata.RegisterDocumentClasses(
    System.Reflection.Assembly.GetExecutingAssembly()
  );
  
  // Optionally clear all of the existing ViewEngines
  ViewEngines.Engines.Clear();
  
  // Register ZPT-Sharp as a ViewEngine for your web application
  ViewEngines.Engines.Add(new ZptViewEngine());
}</code>
    </div>
  </div>
  <div class="region_footer">
    <h5 class="hiddenStructure">Page footer</h5>
    <p class="copyright_notice">
      This documentation website is copyright ©
      <a href="http://www.craigfowler.me.uk/" title="Craig Fowler's website">Craig Fowler</a>
      (and
      <a href="https://github.com/craigfowler/ZPT-Sharp/contributors" title="See all contributors to ZPT Sharp">other contributors</a>
      as applicable)<br />
      All documentation/website content is licensed freely under the
      <a href="http://www.gnu.org/licenses/fdl-1.3.txt" title="GNU Free Documentation License version 1.3">GNU FDL v1.3</a>
    </p>
  </div>
</div>
<div class="github_banner">
  <a href="https://github.com/craigfowler/ZPT-Sharp" title="ZPT-Sharp on github">Fork me on GitHub</a>
</div>



</body>
</html>