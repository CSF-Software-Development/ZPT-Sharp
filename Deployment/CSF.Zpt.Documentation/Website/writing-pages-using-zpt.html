<!doctype html>
<html tal:define="activePage string:writing_pages_using_zpt">
<head metal:use-macro="documents/Shared/general-page.html/macros/common_document_head">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="utf-8">
<title metal:fill-slot="document_title">Writing views using ZPT</title>
<base href="." />
<style type="text/css">
@import url(css/styles.css);
@import url(css/dummy.css);
</style>
<script type="text/javascript" src="js/modernizr.min.js"></script>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/default.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
<script>
hljs.initHighlightingOnLoad();
</script>
</head>
<body metal:use-macro="documents/Shared/general-page.html/macros/common_document_body" class="page_writing_pages_using_zpt">
<div class="content_wrapper">
  <header class="page_header dummy">
    Dummy content
  </header>
  <div class="main_page_area">
    <nav>
      <h2>Navigation menu</h2>
      <ul class="active_introduction dummy">
        <li class="introduction"><a href=".">Introduction</a></li>
        <li class="other_page"><a href="dummy.html">Dummy page</a></li>
      </ul>
    </nav>
    <section class="main_page_content" metal:fill-slot="main_page_content">
      <header><h1>Writing pages using ZPT</h1></header>
      <h2>Introducing METAL and TAL</h2>
      <p>
        ZPT performs two primary operations when it renders a page, in the following order:
      </p>
      <ol>
        <li>
          It finds and
          <a href="metal/introduction.html">processes <abbr title="Macro Extension Template Attribute Language">METAL</abbr>
          attributes</a>.  In doing so, ZPT assembles the page/view from macros of reusable markup.
        </li>
        <li>
          It finds and
          <a href="tal/introduction.html">processes <abbr title="Template Attribute Language">TAL</abbr> attributes</a>.
          In doing so, ZPT renders the appropriate content into the page, filling/replacing elements, showing/hiding
          content, setting attributes and the like.
        </li>
      </ol>
      <p>
        Comparing ZPT to ASP.NET views/pages, METAL could be thought of as similar to <em>user controls</em> and
        (<a href="metal/introduction.html#macros_for_the_html_element">by defining a macro with slots at the root of
        the document</a>) <em>master pages</em>, rolled into a single mechanism. TAL on the other hand connects the
        page object model (your MVC model, where applicable) with the markup.
      </p>
      <h2>Introducing TALES</h2>
      <p>
        <abbr title="Template Attribute Language Expression Syntax">TALES</abbr> is the mechanism by which
        <a href="tales/introduction.html">expressions are written and evaluated</a> within TAL &amp; METAL directives.
        It provides a relatively simple path-oriented syntax which aims to be easy to learn for non-developers; a
        designer should be able to read and understand a TALES path expression even if they could not write one.
        For example: <code>here/LoggedInUser/Name</code> might get the logged-in user's name (depending upon the object
        model passed to the view).
      </p>
      <h2>Providing sample content</h2>
      <p>
        One of ZPT's advantages is <a href="advantages-of-zpt-views.html">the ability to provide sample content</a>.
        This is possible in any scenario where ZPT writes content to a page, since within the target in which content
        is written, existing values will be removed.  Essentially, the rules for sample content are <em>"what would a
        web browser show if the ZPT syntax is ignored"</em>.
      </p>
      <ul>
        <li>
          When using <a href="metal/define-use-macro.html"><code>metal:use-macro</code></a>, you may freely include
          any sample markup you wish within the element which carries the use-macro attribute.  When rendering, METAL
          will replace all of this sample content with the selected macro.
        </li>
        <li>
          When using <a href="tal/attributes.html"><code>tal:attributes</code></a>, you may provide sample values
          for the affected attributes.  These attribute definitions will generally not be used when rendering, instead
          being populated from the model.  The only exception is if the attribute expression
          <a href="tales/cancellation.html">cancels the action</a>, in which case that sample/existing value
          will remain in the rendered output.
        </li>
        <li>
          When using <a href="tal/condition.html"><code>tal:condition</code></a>, the markup marked as conditional
          will of course be visible.  In some scenarios, it might be appropriate to use condition with a hard-coded
          expression which evaluates to <code>false</code> (such as <code>string:</code> - an empty string).  This
          will mean that content contained within is visible <em>only</em> when the source is viewed offline, and
          never when rendered by ZPT.
        </li>
        <li>
          When using <a href="tal/content-replace.html"><code>tal:content</code> or <code>tal:replace</code></a>, you
          may provide sample markup within the element which carries the content/replace attribute.
          The sample content will be removed when ZPT renders the page, and will only remain if the content/replace
          expression <a href="tales/cancellation.html">cancels the action</a>, in which case that sample/default
          markup will remain in the rendered output.
        </li>
      </ul>
      <h2 id="elements_in_tal_metal_namespace">Elements prefixed <code>tal:</code> or <code>metal:</code></h2>
      <p>
        ZPT understands elements which are prefixed to indicate that they are TAL or METAL elements.
        For HTML documents these elements must be prefixed with the literal strings <code>tal:</code> or
        <code>metal:</code>, for XML documents then they must simply be resolved to
        <a href="writing-pages-using-zpt.html#xml_namespaces">the correct namespace</a> (the actual prefix itself is
        irrelevant).
      </p>
      <p>
        Such elements are useful when you wish to perform structural presentation logic, but that logic is not to
        be represented by an HTML/XML element. TAL/METAL elements have the following behaviour; this is the same
        whether the TAL or METAL prefix is used.
      </p>
      <h3>Prefixes are implied for attributes</h3>
      <p>
        TAL or METAL attributes present upon the element do not need to use the prefix which matches their element
        prefix. The following would be understood as a valid TAL <code>define</code> usage:
      </p>
      <pre><code class="html">&lt;tal:block define=&quot;name string:Inigo Montoya&quot;&gt;
  Hello, my name is &lt;span tal:replace=&quot;name&quot;&gt;Joseph Bloggs&lt;/span&gt;;
  you killed my father, prepare to die!
&lt;/tal:block&gt;</code></pre>
      <h3>The omit-tag behaviour is implied</h3>
      <p>
        TAL or METAL elements always follow the <a href="tal/omit-tag.html">the <code>tal:omit-tag</code> behaviour</a>.
        The element's start and end tags will be omitted from the rendered DOM, but its children will be preserved.
      </p>
      <h3>The element name itself does not matter</h3>
      <p>
        The example above uses <code>tal:block</code> as the element name.  The actual name does not matter, just
        the prefix.  Feel free to use a short and appropriate name which describes the element's purpose.
      </p>
      <h2 id="xml_namespaces">XML namespaces</h2>
      <p>
        Applicable only to XML documents, the METAL and TAL attribute prefixes reside within the following namespaces:
      </p>
      <table>
        <colgroup>
          <col class="prefix" />
          <col class="namespace" />
        </colgroup>
        <thead>
          <tr>
            <th>Prefix</th>
            <th>Namespace</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>metal</code></td>
            <td><code>http://xml.zope.org/namespaces/metal</code></td>
          </tr>
          <tr>
            <td><code>tal</code></td>
            <td><code>http://xml.zope.org/namespaces/tal</code></td>
          </tr>
        </tbody>
      </table>
      <p>
        For XML/XHTML documents, the ZPT-Sharp engine makes use of this namespace - and thus source files must include
        the correct <code>xmlns</code> namespace declarations.  The namespace prefixes do not need to be
        <strong>metal</strong> and <strong>tal</strong> in this case, although it is advised to do so unless you have
        good reasons.
      </p>
      <p>
        These namespace declarations are typically accomplished in the <code>&lt;html&gt;</code> element, like so:
      </p>
      <pre><code class="xml">&lt;html xmlns:metal=&quot;http://xml.zope.org/namespaces/metal&quot;
      xmlns:tal=&quot;http://xml.zope.org/namespaces/tal&quot;&gt;
&lt;!-- Rest of the document here --&gt;
&lt;/html&gt;</code></pre>
      <p>
        For HTML documents, the ZPT-Sharp engine does not make use of these namespaces (as the source document is not
        interpreted as XML).  Instead, the literal prefixes <code>metal:</code> and <code>tal:</code> are used.
      </p>
    </section>
  </div>
</div>
<footer class="page_footer dummy">
  Dummy content
</footer>
</body>
</html>
