<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The ZPT-Sharp configuration file</title>
<base href="http://csf-dev.github.io/ZPT-Sharp/">
<style type="text/css">
@import url(css/styles.css);
@import url(css/manpage_exports.css);
</style>

<script data-main="js/config/main" type="text/javascript" src="js/lib/require.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/default.min.css">
</head>
<body class="page_configuration">
<div class="content_wrapper">
  <header class="page_header">
    <div class="hamburger_menu" title="Show/hide navigation">
      <span class="hamburger_line"></span>
      <span class="hamburger_line"></span>
      <span class="hamburger_line"></span>
    </div>
    <h2>
      <a href="index.html">ZPT Sharp</a>
      <em>Zen HTML views</em>
    </h2>
  </header>
  <div class="main_page_area">
    <nav>
      <h2>Site navigation</h2>
      <ul class="active_configuration">
        <li class="introduction nav_item">
          <a href="index.html">Introduction</a>
        </li>
        <li class="advantages nav_item">
          <a href="advantages-of-zpt-views.html">ZPT Advantages</a>
        </li>
        <li class="download nav_item">
          <a href="download.html">Download ZPT-Sharp</a>
        </li>
        <li class="asp_net_view_engine nav_item">
          <a href="asp-net-mvc-view-engine.html">ZPT-Sharp for ASP.NET MVC</a>
        </li>
        <li class="command_line_renderer nav_item">
          <a href="command-line-renderer.html">The command-line renderer</a>
        </li>
        <li class="writing_pages_using_zpt nav_item">
          <a href="writing-pages-using-zpt.html">Writing pages</a>
        </li>
        <li class="metal_reference nav_section">
          <h3>METAL reference</h3>
          <ul>
            <li>
              <a href="metal/introduction.html">Introduction to METAL</a>
            </li>
            <li>
              <a href="metal/define-use-macro.html">Define &amp; use macros</a>
            </li>
            <li>
              <a href="metal/define-fill-slot.html">Define &amp; fill slots</a>
            </li>
            <li>
              <a href="metal/extend-macro.html">Extend macros</a>
            </li>
          </ul>
        </li>
        <li class="tal_reference nav_section">
          <h3>TAL reference</h3>
          <ul>
            <li>
              <a href="tal/introduction.html">Introduction to TAL</a>
            </li>
            <li>
              <a href="tal/define.html">Define variables</a>
            </li>
            <li>
              <a href="tal/condition.html">Conditional rendering</a>
            </li>
            <li>
              <a href="tal/repeat.html">Repeat sections of markup</a>
            </li>
            <li>
              <a href="tal/content-replace.html">Insert model data</a>
            </li>
            <li>
              <a href="tal/attributes.html">Set attributes</a>
            </li>
            <li>
              <a href="tal/omit-tag.html">Omit start/end tag</a>
            </li>
            <li>
              <a href="tal/on-error.html">Error handling</a>
            </li>
          </ul>
        </li>
        <li class="tales_reference nav_section">
          <h3>TALES reference</h3>
          <ul>
            <li>
              <a href="tales/introduction.html">Introduction to TALES</a>
            </li>
            <li>
              <a href="tales/path-expressions.html">Path expressions</a>
            </li>
            <li>
              <a href="tales/string-expressions.html">String expressions</a>
            </li>
            <li>
              <a href="tales/not-expressions.html">Not expressions</a>
            </li>
            <li>
              <a href="tales/csharp-expressions.html">CSharp expressions</a>
            </li>
            <li>
              <a href="tales/built-in-variables.html">Root variables</a>
            </li>
            <li>
              <a href="tales/repeat-variables.html">Repeat variables</a>
            </li>
          </ul>
        </li>
        <li class="advanced_topics nav_section">
          <h3>Advanced topics</h3>
          <ul>
            <li class="page_rendering_api nav_item">
              <a href="page-rendering-api.html">API introduction</a>
            </li>
            <li class="api_reference nav_item">
              <a href="api/index.html">API reference</a>
            </li>
            <li class="configuration nav_item">
              <a href="configuration.html">Configuration</a>
            </li>
            <li class="plugins nav_item">
              <a href="plugins.html">Plugins</a>
            </li>
            <li class="writing_plugins nav_item">
              <a href="writing-plugins.html">Writing plugins</a>
            </li>
            <li class="diagnostics_and_logging nav_item">
              <a href="logging.html">Diagnostics &amp; logging</a>
            </li>
          </ul>
        </li>
      </ul>
    </nav>
    <section class="main_page_content">
      <header>
        <h1>The ZPT-Sharp configuration file</h1>
        <p>
          The following is exported from the <strong>manpage</strong> for the ZPT-Sharp
          configuration file. 
        </p>
      </header>
      <div class="manpage_export">
  <a name="lbAB" id="lbAB">&nbsp;</a>

  <h2>NAME</h2>ZptSharp.config - configuration file for ZPT-Sharp <a name="lbAC" id="lbAC">&nbsp;</a>

  <h2>SYNOPSIS</h2>

  <p>The filename applicable to the configuration file depends upon your use-case:</p>

  <dl compact="">
    <dd><i>ZptBuilder.exe.config</i></dd>
  </dl>

  <dl compact="">
    <dd><i>Web.config</i></dd>
  </dl>

  <dl compact="">
    <dd><i>[YourApplication].config</i></dd>
  </dl><a name="lbAD" id="lbAD">&nbsp;</a>

  <h2>DESCRIPTION</h2>

  <p>The ZPT-Sharp configuration file is primarily used for indicating which ZPT-Sharp plugins are
  installed. The listed plugins are loaded at run-time by the core logic and used for rendering
  documents.</p>

  <p>Other uses of the configuration file depend upon your installation scenario and requirements.
  If the <i>CSharp</i> expressions plugin is installed then the configuration file may be used to
  indicate the desired namespaces which are available to CSharp expressions. Additionally, the
  configuration may be used in order to configure the capture and recording of diagnostic/logging
  information from ZPT-Sharp.</p>

  <p>The filename for the configuration file depends upon the use-case. When using the
  <i>ZptBuilder.exe</i> application, the configuration file must be named
  <i>ZptBuilder.exe.config</i>. When using the ASP.NET MVC ViewEngine, the content documented here
  must be integrated into your web application's <i>Web.config</i> file. When using ZPT-Sharp as an
  API, the applicable content must be integrated into your own application's configuration
  file.</p>

  <p>This file is written using the .NET XML configuration file format. Full coverage of this
  format is beyond the scope of this manual; refer to the appropriate .NET framework documentation
  where applicable. <a name="lbAE" id="lbAE">&nbsp;</a></p>

  <h2>INSTALLING PLUGINS</h2>

  <p>The mandatory part of the configuration file is the section which installs plugins - document
  providers and expression evaluators. At a minimum for any useful operation, at least one document
  provider and one expression evaluator plugin must be installed. One expression evaluator must be
  nominated as the default plugin. The default evaluator is used for TALES expressions which are
  not qualified with a prefix, such as 'path:'. You should also nominate the default HTML and XML
  document provider plugins. These default providers are used when a ZPT document is to be created,
  and all that is known is whether it is HTML or XML formatted.</p>

  <p>The following example shows the relevant content to install three expression evaluator
  plugins, two document provider plugins, and nominate the defaults accordingly.</p>
  <pre>
&lt;configuration&gt;
  &lt;configSections&gt;
    &lt;sectionGroup name="CSF"&gt;
      &lt;sectionGroup name="Zpt"&gt;
          &lt;section name="PluginConfigurationSection"
                   type="CSF.Zpt.PluginConfigurationSection, CSF.Zpt" /&gt;
      &lt;/sectionGroup&gt;
    &lt;/sectionGroup&gt;
  &lt;/configSections&gt;

  &lt;CSF&gt;
    &lt;Zpt&gt;
      &lt;PluginConfigurationSection DefaultHtmlDocumentProvider="CSF.Zpt.DocumentProviders.HtmlZptDocumentProvider"
                                  DefaultXmlDocumentProvider="CSF.Zpt.DocumentProviders.XmlLinqZptDocumentProvider"
                                  DefaultExpressionEvaluator="CSF.Zpt.ExpressionEvaluators.PathExpressions.PathExpressionEvaluator"&gt;
        &lt;PluginAssemblies&gt;
          &lt;Assembly Path="CSF.Zpt.DocumentProviders.HtmlHAP.dll" /&gt;
          &lt;Assembly Path="CSF.Zpt.DocumentProviders.XmlLinq.dll" /&gt;
          &lt;Assembly Path="CSF.Zpt.ExpressionEvaluators.PathExpressions.dll" /&gt;
          &lt;Assembly Path="CSF.Zpt.ExpressionEvaluators.StringExpressions.dll" /&gt;
          &lt;Assembly Path="CSF.Zpt.ExpressionEvaluators.NotExpressions.dll" /&gt;
        &lt;/PluginAssemblies&gt;
      &lt;/PluginConfigurationSection&gt;
    &lt;/Zpt&gt;
  &lt;/CSF&gt;
&lt;/configuration&gt;
</pre>

  <p>Each &lt;Assembly&gt; element, in its Path attribute, lists a single .NET assembly containing
  one or more plugins. The assembly paths are either absolute or relative paths. Where a relative
  path is given, it is evaluated based upon the path to the <i>CSF.Zpt.dll</i> assembly. If the
  plugin assembly is in the same directory as that main ZPT-Sharp assembly then just the filename
  alone is sufficient (as shown above). The default expression evaluator, XML document provider and
  HTML document provider are indicated by listing their namespace-qualified type names in the
  appropriate configuration attributes. <a name="lbAF" id="lbAF">&nbsp;</a></p>

  <h2>CONFIGURING CSHARP NAMESPACES</h2>

  <p>If the plugin <i>CSF.Zpt.ExpressionEvaluators.CSharpExpressions.dll</i> is installed, then
  CSharp expressions are available. When evaluating such expressions, by default two namespaces are
  made to the expressions via 'using NAMESPACE;' blocks. These two namespaces are <i>System</i> and
  <i>System.Linq</i>. If you wish to customise these namespaces (for all expressions) then you may
  integrate the following into your configuration.</p>
  <pre>
&lt;configuration&gt;
  &lt;configSections&gt;
    &lt;sectionGroup name="CSF"&gt;
      &lt;sectionGroup name="Zpt"&gt;
          &lt;sectionGroup name="ExpressionEvaluators"&gt;
            &lt;sectionGroup name="CSharpExpressions"&gt;
              &lt;section name="NamespaceConfiguration"
                       type="CSF.Zpt.ExpressionEvaluators.CSharpExpressions.NamespaceConfiguration, CSF.Zpt.ExpressionEvaluators.CSharpExpressions" /&gt;
            &lt;/sectionGroup&gt;
          &lt;/sectionGroup&gt;
      &lt;/sectionGroup&gt;
    &lt;/sectionGroup&gt;
  &lt;/configSections&gt;

  &lt;CSF&gt;
    &lt;Zpt&gt;
      &lt;ExpressionEvaluators&gt;
        &lt;CSharpExpressions&gt;
          &lt;NamespaceConfiguration&gt;
            &lt;add Namespace="NAMESPACE" /&gt;
          &lt;/NamespaceConfiguration&gt;
        &lt;/CSharpExpressions&gt;
      &lt;/ExpressionEvaluators&gt;
    &lt;/Zpt&gt;
  &lt;/CSF&gt;
&lt;/configuration&gt;
</pre>

  <p>You may repeat the <i>&lt;add Namespace="NAMESPACE" /&gt;</i> element as many times as
  desired, each time replacing NAMESPACE with a namespace to be imported. <a name="lbAG" id="lbAG">&nbsp;</a></p>

  <h2>CONFIGURING DIAGNOSTICS</h2>

  <p>ZPT-Sharp makes use of the .NET <b>System.Diagnostics</b> functionality to make diagnostic and
  logging information available, configured via the configuration file. This .NET functionality
  provides a highly rich and configurable API, an in-depth examination of which is well beyond the
  scope of this documentation. Refer to the appropriate .NET framework documentation for more
  information.</p>

  <p>For reference, the <b>TraceSource</b> names used by ZPT-Sharp are as follows:</p>

  <dl compact="">
    <dd><i>CSF.Zpt</i></dd>
  </dl>

  <dl compact="">
    <dd><i>CSF.Zpt.Cli</i></dd>
  </dl>

  <dl compact="">
    <dd><i>CSF.Zpt.Mvc</i></dd>
  </dl>

  <p>The following example configuration content illustrates a minimal logging set-up which will
  record messages to a file.</p>
  <pre>
&lt;configuration&gt;
  &lt;system.diagnostics&gt;
    &lt;sources&gt;
      &lt;source name="CSF.Zpt" switchName="defaultSwitch" switchType="System.Diagnostics.SourceSwitch"&gt;
        &lt;listeners&gt;
          &lt;add name="myListener" 
               type="System.Diagnostics.TextWriterTraceListener" 
               initializeData="ZptSharp.log" /&gt;
          &lt;remove name="Default" /&gt;
        &lt;/listeners&gt;
      &lt;/source&gt;
    &lt;/sources&gt;
    &lt;switches&gt;
      &lt;add name="defaultSwitch" value="Verbose"/&gt;
    &lt;/switches&gt;
  &lt;/system.diagnostics&gt;
&lt;/configuration&gt;
</pre><a name="lbAH" id="lbAH">&nbsp;</a>

  <h2>SEE ALSO</h2>

  <p><i>ZptBuilder.exe</i> (1)</p>

  <dl compact="">
    <dd>Documentation for the ZptBuilder application, which makes use of this configuration</dd>
  </dl>

  <p>Framework documentation for .NET XML configuration files</p>

  <dl compact="">
    <dd>Describes the overall layout and syntax of this configuration file format. XML
    configuration files have a great deal of other functionality available, beyond that which is
    described here.</dd>
  </dl>

  <p>Framework documentation for the .NET <i>System.Diagnostics</i> namespace</p>

  <dl compact="">
    <dd>Describes how to set-up and configure <i>TraceListener</i> instances. Listeners subscribe
    to the <i>TraceSource</i> instances exposed by the application code.</dd>
  </dl>
  </div>
    </section>
  </div>
</div>
<footer class="page_footer">
  <section class="copyright">
    Copyright © 2016
    <a href="http://csf-dev.com/">CSF Software Limited</a> et al
  </section>
  <section class="version">
    <p>
      Website built <strong>2016-11-18</strong>;
      for version
      <strong>
        v0.7.0-alpha
      </strong>
    </p>
  </section>
</footer>
<div class="cookie_statement">
  <p>
    This website uses analytics cookies to understand how visitors are making use of its content.
    This helps decide where improvements can be made in the future.
    <a href="https://ico.org.uk/for-organisations/guide-to-pecr/cookies-and-similar-technologies/">European and UK law</a>
    requires us to ask you for your consent to this.
  </p>
  <button class="accept">Accept cookies</button>
</div>

</body>
</html>
