<!doctype html>
<html tal:define="activePage writing_pages_using_zpt">
<head metal:use-macro="pages/Shared/general-page.pt/macros/common_document_head">
<meta charset="utf-8">
<title metal:fill-slot="document_title">Writing views using ZPT</title>
<base href="." />
<style type="text/css">
@import url(css/styles.css);
@import url(css/dummy.css);
</style>
<script type="text/javascript" src="js/modernizr.min.js"></script>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/default.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
<script>
hljs.initHighlightingOnLoad();
</script>
</head>
<body metal:use-macro="pages/Shared/general-page.pt/macros/common_document_body" class="page_writing_pages_using_zpt">
<div class="content_wrapper">
  <header class="page_header dummy">
    Dummy content
  </header>
  <div class="main_page_area">
    <nav>
      <h2>Navigation menu</h2>
      <ul class="active_introduction dummy">
        <li class="introduction"><a href=".">Introduction</a></li>
        <li class="other_page"><a href="dummy.html">Dummy page</a></li>
      </ul>
    </nav>
    <section class="main_page_content" metal:fill-slot="main_page_content">
      <header><h1>Writing pages using ZPT</h1></header>
      <p>
        <abbr title="Zope Page Templates">ZPT</abbr> is an <em>attribute language</em>; this means that their syntax
        resides entirely within HTML/XML attributes.  The distinct technical advantage of attribute languages is that
        they do not interfere with the validity of the underlying HTML or XML structure of the source file.
        This means that:
      </p>
      <ul>
        <li>
          MVC views written in ZPT-Sharp may be viewed offline from their application; the source files will render as
          valid HTML/XHTML pages.
        </li>
        <li>
          For XML-based documents, the source file is also well-formed XML.
        </li>
        <li>
          ZPT-Sharp exposes only a small (but powerful) number of functions in order to perform their function, these
          present a shallow learning curve for non-developers to comprehend.
        </li>
      </ul>
      <h2>Introducing METAL and TAL</h2>
      <p>
        ZPT performs two primary operations when it renders a page, in the following order:
      </p>
      <ol>
        <li>
          It finds and
          <a href="metal/introduction.html">processes <abbr title="Macro Extension Template Attribute Language">METAL</abbr>
          attributes</a>.  In doing so, ZPT assembles the page/view from macros of reusable markup.
        </li>
        <li>
          It finds and
          <a href="tal/introduction.html">processes <abbr title="Template Attribute Language">TAL</abbr> attributes</a>.
          In doing so, ZPT renders the appropriate content into the page, filling/replacing elements, showing/hiding
          content, setting attributes and the like.
        </li>
      </ol>
      <p>
        Comparing ZPT to ASP.NET views/pages, METAL could be thought of as similar to <em>user controls</em> and
        (<a href="metal/introduction.html#macros_for_the_html_element">by defining a macro with slots at the root of
        the document</a>) <em>master pages</em>, rolled into a single mechanism. TAL on the other hand connects the
        page object model (potentially a ViewModel) with the markup.
      </p>
      <h2>Providing dummy content</h2>
      <p>
        Because many of the METAL and TAL directives result in the <em>replacement of content</em>, it is possible to
        provide dummy content (including markup) which is replaced at rendering time, but provides a frame of reference
        to somebody reading/viewing the source file.  Consider the following:
      </p>
      <pre><code class="html">&lt;div class=&quot;log_out&quot;&gt;
  You are logged in as
  &lt;a class=&quot;current_user&quot;
     href=&quot;profile_url&quot;
     tal:content=&quot;site/CurrentUser/Username&quot;&gt;Joseph Bloggs&lt;/a&gt;.&lt;br&gt;
  &lt;a href=&quot;logout_url&quot;&gt;Log out&lt;/a&gt;.
&lt;/div&gt;</code></pre>
      <p>
        If the source page were viewed in a web browser (without the underlying application), then the "Jospeh Bloggs"
        dummy content would be visible.  This is useful for CSS designers in that they can see what the control might
        look like when rendered using the application proper (with some representative data).  When the same source
        file is used with the application, the dummy data is discarded and replaced with the value of the
        <a href="introduction-to-tales.html">TALES</a> expression <code>site/CurrentUser/Username</code>.
      </p>
      <p>
        Dummy content may be simple strings, or could be blocks of markup.
      </p>
      <h2>Elements prefixed <code>tal:</code> or <code>metal:</code></h2>
      <p>
        ZPT understands elements which are prefixed to indicate that they are TAL or METAL elements.
        For HTML documents these elements must be prefixed with the literal strings <code>tal:</code> or
        <code>metal:</code>, for XML documents then they must simply be resolved to
        <a href="writing-pages-using-zpt.html#xml_namespaces">the correct namespace</a> (the actual prefix itself is
        irrelevant).
      </p>
      <p>
        Such elements are useful when you wish to perform structural presentation logic, but that logic is not to
        be represented by an HTML/XML element. TAL/METAL elements have the following behaviour; this is the same
        whether the TAL or METAL prefix is used.
      </p>
      <h3>Prefixes are implied for attributes</h3>
      <p>
        TAL or METAL attributes present upon the element do not need to use the prefix which matches their element
        prefix. The following would be understood as a valid TAL <code>define</code> usage:
      </p>
      <pre><code class="html">&lt;tal:block define=&quot;name string:Inigo Montoya&quot;&gt;
  Hello, my name is &lt;span tal:replace=&quot;name&quot;&gt;Joseph Bloggs&lt;/span&gt;;
  you killed my father, prepare to die!
&lt;/tal:block&gt;</code></pre>
      <h3>The omit-tag behaviour is implied</h3>
      <p>
        TAL or METAL elements always behave as if they had <a href="tal/omit-tag.html"><code>tal:omit-tag="1"</code></a>
        defined upon them.  The element will never be rendered, but its children will be.
      </p>
      <h3>The element name itself does not matter</h3>
      <p>
        The example above uses <code>tal:block</code> as the element name.  The actual name does not matter, just
        the prefix.  Feel free to use a short and appropriate name which describes the element's purpose.
      </p>
      <h2 id="xml_namespaces">XML namespaces</h2>
      <p>
        Applicable only to XML documents, the METAL and TAL attribute prefixes reside within the following namespaces:
      </p>
      <table>
        <colgroup>
          <col class="prefix" />
          <col class="namespace" />
        </colgroup>
        <thead>
          <tr>
            <th>Prefix</th>
            <th>Namespace</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>metal</code></td>
            <td><code>http://xml.zope.org/namespaces/metal</code></td>
          </tr>
          <tr>
            <td><code>tal</code></td>
            <td><code>http://xml.zope.org/namespaces/tal</code></td>
          </tr>
        </tbody>
      </table>
      <p>
        For XML/XHTML documents, the ZPT-Sharp engine makes use of this namespace - and thus source files must include
        the correct <code>xmlns</code> namespace declarations.  The namespace prefixes do not need to be
        <strong>metal</strong> and <strong>tal</strong> in this case, although it is advised to do so unless you have
        good reasons.
      </p>
      <p>
        These namespace declarations are typically accomplished in the <code>&lt;html&gt;</code> element, like so:
      </p>
      <pre><code class="xml">&lt;html xmlns:metal=&quot;http://xml.zope.org/namespaces/metal&quot;
      xmlns:tal=&quot;http://xml.zope.org/namespaces/tal&quot;&gt;
&lt;!-- Rest of the document here --&gt;
&lt;/html&gt;</code></pre>
      <p>
        For HTML documents, the ZPT-Sharp engine does not make use of these namespaces (as the source document is not
        interpreted as XML).  Instead, the literal prefixes <code>metal:</code> and <code>tal:</code> are used.
      </p>
    </section>
  </div>
</div>
<footer class="page_footer dummy">
  Dummy content
</footer>
</body>
</html>
